<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<title>App ôn tập Tin học với AI</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f2f2f2;
    margin:0;
}
.container{
    width:90%;
    max-width:1100px;
    margin:20px auto;
}
.header{
    background:#1976d2;
    color:white;
    padding:15px;
    font-size:22px;
    text-align:center;
}
.main{
    display:flex;
    gap:20px;
    margin-top:20px;
}
.panel{
    background:white;
    padding:15px;
    border-radius:6px;
    box-shadow:0 0 5px rgba(0,0,0,0.2);
}
.left{
    width:35%;
}
.right{
    width:65%;
}
button{
    margin-top:10px;
    padding:10px 15px;
    background:#1976d2;
    color:white;
    border:none;
    border-radius:4px;
    cursor:pointer;
}
button:hover{
    background:#125aa0;
}
#output{
    white-space:pre-wrap;
    height:420px;
    overflow:auto;
    border:1px solid #ccc;
    padding:10px;
    background:#fafafa;
}
.loading{
    color:#1976d2;
    font-style:italic;
}
</style>
</head>

<body>
<div class="container">
    <div class="header">ỨNG DỤNG ÔN TẬP TIN HỌC THPT</div>

    <div class="main">
        <div class="panel left">
            <b>Chọn bài học</b><br><br>
            <label><input type="checkbox"> Tin 10 – Bài 1: Thông tin và dữ liệu</label><br>
            <label><input type="checkbox"> Tin 10 – Bài 2: Biểu diễn thông tin</label><br>
            <label><input type="checkbox"> Tin 11 – Python cơ bản</label><br>
            <label><input type="checkbox"> Tin 12 – Cơ sở dữ liệu</label><br>

            <button onclick="startStudy()">Bắt đầu ôn tập</button>
        </div>

        <div class="panel right">
            <b>Cửa sổ học tập</b>
            <div id="output">Nội dung ôn tập sẽ hiển thị tại đây...</div>
        </div>
    </div>
</div>

<script>
async function startStudy(){
    const output = document.getElementById("output");
    const selected = [];

    document.querySelectorAll('input[type="checkbox"]:checked').forEach(cb=>{
        selected.push(cb.parentElement.textContent.trim());
    });

    if(selected.length === 0){
        output.innerText = "Vui lòng chọn ít nhất một bài để ôn tập.";
        return;
    }

    output.innerHTML = '<span class="loading">Đang tạo tài liệu ôn tập, vui lòng chờ...</span>';

    const prompt = `
Bạn là trợ lý ôn thi TN THPT môn Tin học.
Hãy tạo tài liệu ôn tập cho các bài sau:
${selected.join(", ")}

Trình bày rõ:
- Kiến thức trọng tâm
- Lỗi học sinh thường sai
- Ví dụ ngắn gọn, dễ hiểu
`;

    const API_KEY = "AIzaSyCxI4WJukZfvITNAeIlNurxFzzhhQtLQdM";
    const url = "https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=" + API_KEY;

    try{
        const res = await fetch(url,{
            method:"POST",
            headers:{ "Content-Type":"application/json" },
            body:JSON.stringify({
                contents:[
                    { parts:[ { text: prompt } ] }
                ]
            })
        });

        const data = await res.json();
        const text = data.candidates[0].content.parts[0].text;
        output.innerText = text;

    }catch(e){
        output.innerText = "Lỗi kết nối Google AI Studio.";
        console.error(e);
    }
}
</script>

</body>
</html>
